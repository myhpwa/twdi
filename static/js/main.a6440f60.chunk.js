(this.webpackJsonptwdi=this.webpackJsonptwdi||[]).push([[1],{123:function(t){t.exports=JSON.parse('{"name":"twdi","homepage":"/twdi","productName":"\u53f0\u7063\u85e5\u54c1","pwaVersion":"3.2.4","version":"1.1.0","license":"MIT","keywords":["\u85e5\u54c1","Drug"],"description":"\u53f0\u7063\u85e5\u54c1\u67e5\u8a62 app \u53ef\u67e5\u8a62\u85e5\u54c1\u5168\u540d\u3001\u82f1\u6587\u540d\u3001\u7528\u6cd5\u7528\u91cf\u3001\u4e3b\u6210\u5206\u3002App \u652f\u63f4\u96e2\u7dda\u700f\u89bd\u3001\u5b57\u578b\u8abf\u6574\u3002","repository":"https://github.com/MrMYHuang/twdi","author":{"name":"Meng-Yuan Huang","email":"myh@live.com"},"private":false,"files":["README.md"],"main":"buildElectron/main.js","scripts":{"postinstall":"electron-builder install-app-deps","start":"react-app-rewired start","build":"react-app-rewired build && powershell -file CopyBuild.ps1","build_linux":"react-app-rewired build && ./CopyBuild.sh","test":"react-app-rewired test","eject":"react-scripts eject","build-electron":"tsc -b tsconfigElectron.json","build-electron-store":"tsc -b tsconfigElectron.json && mv buildElectron/mainStore.js buildElectron/main.js","start-electron":"npm run build-electron && electron .","dist-snap":"npm run build-electron-store && rm -f dist/*.snap && electron-builder -l snap -c electronBuilderConfigs/snap.json","dist-snap-arm64":"export SNAPCRAFT_BUILD_ENVIRONMENT=lxd && npm run build-electron-store && rm -f dist/*.snap && electron-builder -l snap --arm64 -c electronBuilderConfigs/snap.json","publish-snap":"snapcraft upload --release=stable dist/*.snap","icons-mas":"cd buildElectron && iconutil -c icns icon.iconset","dist-mas":"npm run build-electron-store && electron-builder -m mas --universal -c electronBuilderConfigs/mas.json","dist-mas-dev":"npm run build-electron-store && electron-builder -m mas-dev --arm64 -c electronBuilderConfigs/masDev.json"},"eslintConfig":{"extends":"react-app"},"dependencies":{"electron-window-state":"^5.0.3","semver":"^7.3.5"},"devDependencies":{"@types/semver":"^7.3.7","adm-zip":"^0.5.5","node-downloader-helper":"^1.0.18","@ionic/react":"^5.6.11","@ionic/react-router":"^5.6.11","@testing-library/jest-dom":"^5.14.1","@testing-library/react":"^11.2.7","@testing-library/user-event":"^12.8.3","@types/adm-zip":"^0.4.34","@types/jest":"^26.0.24","@types/node":"^12.20.16","@types/qrcode":"^1.4.1","@types/react":"^16.14.11","@types/react-dom":"^16.9.14","@types/react-redux":"^7.1.18","@types/react-router":"^5.1.16","@types/react-router-dom":"^5.1.8","@types/uuid":"^8.3.1","axios":"^0.21.1","customize-cra":"^1.0.0","electron":"^11.4.10","electron-builder":"^22.11.7","electron-builder-notarize-pkg":"^1.2.0","history":"^4.10.1","ionicons":"^5.5.2","memfs":"^3.2.0","qrcode":"^1.4.4","query-string":"^6.14.1","react":"^17.0.2","react-app-rewired":"^2.1.7","react-dom":"^17.0.2","react-redux":"^7.2.4","react-router":"^5.2.0","react-router-dom":"^5.2.0","react-scripts":"^4.0.3","redux":"^4.1.0","swiped-events-myh":"^1.2.0","typescript":"^4.3.5","uuid":"^8.3.1","workbox-background-sync":"^5.1.3","workbox-broadcast-update":"^5.1.3","workbox-cacheable-response":"^5.1.3","workbox-core":"^5.1.3","workbox-expiration":"^5.1.3","workbox-google-analytics":"^5.1.3","workbox-navigation-preload":"^5.1.3","workbox-precaching":"^5.1.3","workbox-range-requests":"^5.1.3","workbox-routing":"^5.1.3","workbox-strategies":"^5.1.3","workbox-streams":"^5.1.3"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},215:function(t,e,n){"use strict";(function(t){var s=n(3),r=n.n(s),o=n(8),a=n(6),i=n(9),c=n(10),l=n(11),u=n(0),d=n.n(u),p=n(2),h=n(27),j=n(5),b=n(15),f=n(216),m=n.n(f),v=(n(410),n(123)),x=n(1),g=function(e){Object(c.a)(s,e);var n=Object(l.a)(s);function s(t){var e;return Object(a.a)(this,s),(e=n.call(this,t)).reportText="",e.state={showBugReportAlert:!1,showFontLicense:!1,twdDataDownloadRatio:0,showUpdateDrugDataDone:!1,showClearAlert:!1,showToast:!1,toastMessage:""},e}return Object(i.a)(s,[{key:"ionViewWillEnter",value:function(){}},{key:"updateBookmark",value:function(t,e){var n=t.findIndex((function(t){return t.uuid===e.uuid}));-1===n?console.error("Update bookmark fails! Can't find the original bookmark with UUID: ".concat(e.uuid)):t[n]=e}},{key:"updateDrugData",value:function(){var t=Object(o.a)(r.a.mark((function t(){var e,n,s=this;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.setState({twdDataDownloadRatio:0}),e=r.a.mark((function t(e){var n,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=j.a.durgResources[e],t.next=3,j.a.downloadTwdData(n.url,(function(t){s.setState({twdDataDownloadRatio:(e+t/100)/j.a.durgResources.length})}));case 3:o=t.sent,j.a.saveFileToIndexedDB(n.dataKey,o);case 5:case"end":return t.stop()}}),t)})),n=0;case 3:if(!(n<j.a.durgResources.length)){t.next=8;break}return t.delegateYield(e(n),"t0",5);case 5:n++,t.next=3;break;case 8:this.setState({twdDataDownloadRatio:1,showUpdateDrugDataDone:!0});case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(x.jsxs)(p.q,{children:[Object(x.jsx)(p.e,{children:Object(x.jsx)(p.G,{children:Object(x.jsx)(p.D,{className:"uiFont",children:"\u8a2d\u5b9a"})})}),Object(x.jsxs)(p.d,{children:[Object(x.jsxs)(p.n,{children:[Object(x.jsxs)(p.i,{hidden:!this.props.mainVersion,children:[Object(x.jsx)("div",{tabIndex:0}),Object(x.jsx)(p.f,{icon:b.n,slot:"start"}),Object(x.jsxs)(p.m,{className:"ion-text-wrap uiFont",children:["Backend app \u7248\u672c: ",this.props.mainVersion]})]}),Object(x.jsxs)(p.i,{children:[Object(x.jsx)("div",{tabIndex:0}),Object(x.jsx)(p.f,{icon:b.d,slot:"start"}),Object(x.jsx)(p.m,{className:"ion-text-wrap uiFont",children:Object(x.jsx)("a",{href:"https://github.com/MrMYHuang/twdi#report",target:"_new",children:"\u555f\u7528 app \u7570\u5e38\u8a18\u9304"})}),Object(x.jsx)(p.F,{slot:"end",checked:this.props.hasAppLog,onIonChange:function(t){var n=t.detail.checked;e.props.hasAppLog!==n&&(n?j.a.enableAppLog():j.a.disableAppLog(),e.props.dispatch({type:"SET_KEY_VAL",key:"hasAppLog",val:n}))}})]}),Object(x.jsxs)(p.i,{hidden:!this.props.settings.hasAppLog,children:[Object(x.jsx)("div",{tabIndex:0}),Object(x.jsx)(p.f,{icon:b.d,slot:"start"}),Object(x.jsx)(p.m,{className:"ion-text-wrap uiFont",children:"\u56de\u5831 app \u7570\u5e38\u8a18\u9304"}),Object(x.jsx)(p.c,{fill:"outline",shape:"round",slot:"end",size:"large",className:"uiFont",onClick:function(t){e.reportText="\u700f\u89bd\u5668\uff1a"+navigator.userAgent+"\n\nApp\u7248\u672c\uff1a"+v.pwaVersion+"\n\nApp\u8a2d\u5b9a\uff1a"+JSON.stringify(e.props.settings)+"\n\nLog\uff1a\n"+j.a.getLog(),e.setState({showBugReportAlert:!0})},children:"\u56de\u5831"}),Object(x.jsx)(p.a,{cssClass:"uiFont",backdropDismiss:!1,isOpen:this.state.showBugReportAlert,header:"\u7570\u5e38\u56de\u5831",subHeader:"\u8f38\u5165\u60a8\u7684 E-mail\uff0c\u4ee5\u5f8c\u7e8c\u806f\u7d61",inputs:[{name:"name0",type:"email",placeholder:"\u4f8b\uff1aabc@example.com"},{name:"name1",type:"textarea",placeholder:"\u8acb\u63cf\u8ff0\u767c\u751f\u6b65\u9a5f"}],buttons:[{text:"\u9001\u51fa",cssClass:"primary uiFont",handler:function(){var t=Object(o.a)(r.a.mark((function t(n){var s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(n.name0)){t.next=3;break}return e.setState({showBugReportAlert:!1,showToast:!0,toastMessage:"\u932f\u8aa4\uff0cE-mail \u4e0d\u7b26\u683c\u5f0f\uff01"}),t.abrupt("return");case 3:return t.prev=3,s=m.a.create({timeout:1e4}),t.next=7,s.post(j.a.bugReportApiUrl,{subject:"".concat(v.productName,"\u7570\u5e38\u8a18\u9304\u56de\u5831"),text:"E-mail: ".concat(n.name0,"\n\n\u767c\u751f\u6b65\u9a5f: ").concat(n.name1,"\n\n").concat(e.reportText)});case 7:e.setState({showBugReportAlert:!1,showToast:!0,toastMessage:"\u7570\u5e38\u56de\u5831\u6210\u529f"}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(3),console.error(t.t0),e.setState({showBugReportAlert:!1,showToast:!0,toastMessage:"\u7570\u5e38\u56de\u5831\u5931\u6557"});case 14:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}()},{text:"\u53d6\u6d88",role:"cancel",cssClass:"secondary uiFont",handler:function(){return e.setState({showBugReportAlert:!1})}}]})]}),Object(x.jsxs)(p.i,{children:[Object(x.jsx)("div",{tabIndex:0}),Object(x.jsx)(p.f,{icon:b.l,slot:"start"}),Object(x.jsx)("div",{className:"contentBlock",children:Object(x.jsxs)("div",{style:{flexDirection:"column"},children:[Object(x.jsx)(p.m,{className:"ion-text-wrap uiFont",children:"App\u8a2d\u5b9a\u8207\u66f8\u7c64"}),Object(x.jsxs)("div",{style:{textAlign:"right"},children:[Object(x.jsx)(p.c,{fill:"outline",shape:"round",size:"large",style:{fontSize:"var(--ui-font-size)"},onClick:function(){var t=Object(o.a)(r.a.mark((function t(e){var n,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n="data:text/json;charset=utf-8,".concat(encodeURIComponent(localStorage.getItem(j.a.storeFile)||"")),(s=document.createElement("a")).href=n,s.download=j.a.storeFile,s.click(),s.remove();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"\u532f\u51fa"}),Object(x.jsx)("input",{id:"importJsonInput",type:"file",accept:".json",style:{display:"none"},onChange:function(){var n=Object(o.a)(r.a.mark((function n(s){var o,a,i;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=null===(o=s.target.files)||void 0===o?void 0:o.item(0),n.next=3,null===a||void 0===a?void 0:a.text();case 3:if(n.t0=n.sent,n.t0){n.next=6;break}n.t0="";case 6:i=n.t0;try{JSON.parse(i),localStorage.setItem(j.a.storeFile,i),e.props.dispatch({type:"LOAD_SETTINGS"}),t((function(){e.updateDrugData()}))}catch(r){console.error(r),console.error((new Error).stack)}document.getElementById("importJsonInput").value="";case 9:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()}),Object(x.jsx)(p.c,{fill:"outline",shape:"round",size:"large",style:{fontSize:"var(--ui-font-size)"},onClick:function(t){document.querySelector("#importJsonInput").click()},children:"\u532f\u5165"}),Object(x.jsx)(p.c,{fill:"outline",shape:"round",size:"large",style:{fontSize:"var(--ui-font-size)"},onClick:function(t){e.setState({showClearAlert:!0})},children:"\u91cd\u7f6e"}),Object(x.jsx)(p.a,{cssClass:"uiFont",isOpen:this.state.showClearAlert,backdropDismiss:!1,onDidPresent:function(t){},header:"\u91cd\u7f6e\u6703\u9084\u539fapp\u8a2d\u5b9a\u9810\u8a2d\u503c\u4e26\u6e05\u9664\u66f8\u7c64\u3001\u96e2\u7dda\u8cc7\u6599\u6a94\uff01\u78ba\u5b9a\u91cd\u7f6e\uff1f",buttons:[{text:"\u53d6\u6d88",cssClass:"primary uiFont",handler:function(t){e.setState({showClearAlert:!1})}},{text:"\u91cd\u7f6e",cssClass:"secondary uiFont",handler:function(){var t=Object(o.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.a.clearAppData();case 2:e.props.dispatch({type:"DEFAULT_SETTINGS"}),e.setState({showClearAlert:!1,showToast:!0,toastMessage:"\u6e05\u9664\u6210\u529f!"});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]})]})]})})]}),Object(x.jsxs)(p.i,{children:[Object(x.jsx)("div",{tabIndex:0}),Object(x.jsx)(p.f,{icon:b.q,slot:"start"}),Object(x.jsxs)("div",{style:{width:"100%"},children:[Object(x.jsx)(p.m,{className:"ion-text-wrap uiFont",children:"\u66f4\u65b0\u96e2\u7dda\u85e5\u54c1\u8cc7\u6599"}),Object(x.jsx)(p.r,{value:this.state.twdDataDownloadRatio})]}),Object(x.jsx)(p.c,{fill:"outline",shape:"round",slot:"end",size:"large",style:{fontSize:"var(--ui-font-size)"},onClick:function(){var t=Object(o.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.updateDrugData());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"\u66f4\u65b0"}),Object(x.jsx)(p.E,{cssClass:"uiFont",isOpen:this.state.showUpdateDrugDataDone,onDidDismiss:function(){return e.setState({showUpdateDrugDataDone:!1})},message:"\u96e2\u7dda\u85e5\u54c1\u8cc7\u6599\u66f4\u65b0\u5b8c\u7562\uff01",duration:2e3})]}),Object(x.jsxs)(p.i,{children:[Object(x.jsx)("div",{tabIndex:0}),Object(x.jsx)(p.f,{icon:b.k,slot:"start"}),Object(x.jsx)(p.m,{className:"ion-text-wrap uiFont",children:j.a.appSettings.theme}),Object(x.jsxs)(p.y,{slot:"end",value:+this.props.theme,style:{fontSize:"var(--ui-font-size)"},interface:"popover",interfaceOptions:{cssClass:"twdithemes"},onIonChange:function(t){var n=+t.detail.value;+e.props.theme!==n&&e.props.dispatch({type:"SET_KEY_VAL",key:"theme",val:n})},children:[Object(x.jsx)(p.z,{className:"uiFont cbeta",value:0,children:"\u7da0\u5e95"}),Object(x.jsx)(p.z,{className:"uiFont dark",value:1,children:"\u6697\u8272"}),Object(x.jsx)(p.z,{className:"uiFont light",value:2,children:"\u4eae\u8272"}),Object(x.jsx)(p.z,{className:"uiFont oldPaper",value:3,children:"\u820a\u66f8"}),Object(x.jsx)(p.z,{className:"uiFont marble",value:4,children:"\u5927\u7406\u77f3"})]})]}),Object(x.jsxs)(p.i,{children:[Object(x.jsx)("div",{tabIndex:0}),Object(x.jsx)(p.f,{icon:b.z,slot:"start"}),Object(x.jsx)("div",{className:"contentBlock",children:Object(x.jsxs)("div",{style:{flexDirection:"column"},children:[Object(x.jsxs)(p.m,{className:"ion-text-wrap uiFont",children:[j.a.appSettings.uiFontSize,": ",this.props.uiFontSize]}),Object(x.jsx)(p.s,{min:10,max:128,pin:!0,snaps:!0,value:this.props.uiFontSize,onIonChange:function(n){e.props.dispatch({type:"SET_KEY_VAL",key:"uiFontSize",val:+n.detail.value}),t((function(){j.a.updateCssVars(e.props.settings)}))}})]})})]}),Object(x.jsxs)(p.i,{children:[Object(x.jsx)("div",{tabIndex:0}),Object(x.jsx)(p.f,{icon:b.z,slot:"start"}),Object(x.jsxs)("div",{className:"contentBlock",children:[Object(x.jsxs)(p.m,{className:"ion-text-wrap uiFont",children:[j.a.appSettings.fontSize,": ",Object(x.jsx)("span",{className:"textFont",children:this.props.settings.fontSize})]}),Object(x.jsx)(p.s,{min:10,max:128,pin:!0,snaps:!0,value:this.props.settings.fontSize,onIonChange:function(n){e.props.dispatch({type:"SET_KEY_VAL",key:"fontSize",val:+n.detail.value}),t((function(){j.a.updateCssVars(e.props.settings)}))}})]})]}),Object(x.jsxs)(p.i,{children:[Object(x.jsx)("div",{tabIndex:0}),Object(x.jsx)(p.f,{icon:b.m,slot:"start"}),Object(x.jsxs)("div",{style:{fontSize:"var(--ui-font-size)"},children:[Object(x.jsx)("div",{children:"\u95dc\u65bc"}),Object(x.jsx)("div",{children:Object(x.jsx)("a",{href:"https://github.com/MrMYHuang/twdi",target:"_new",children:"\u64cd\u4f5c\u8aaa\u660e\u8207\u958b\u653e\u539f\u59cb\u78bc"})}),Object(x.jsx)("div",{children:"\u4f5c\u8005: Meng-Yuan Huang"}),Object(x.jsx)("div",{children:Object(x.jsx)("a",{href:"mailto:myh@live.com",target:"_new",children:"myh@live.com"})})]})]})]}),Object(x.jsx)(p.E,{cssClass:"uiFont",isOpen:this.state.showToast,onDidDismiss:function(){return e.setState({showToast:!1})},message:this.state.toastMessage,duration:2e3})]})]})}}]),s}(d.a.Component),w=Object(p.R)(g);e.a=Object(h.b)((function(t){return{settings:t.settings,hasAppLog:t.settings.hasAppLog,theme:t.settings.theme,uiFontSize:t.settings.uiFontSize,speechRate:t.settings.speechRate,bookmarks:t.settings.bookmarks,voiceURI:t.settings.voiceURI,mainVersion:t.tmpSettings.mainVersion}}))(w)}).call(this,n(74).setImmediate)},217:function(t,e,n){"use strict";(function(t){var s=n(3),r=n.n(s),o=n(8),a=n(6),i=n(9),c=n(10),l=n(11),u=n(0),d=n.n(u),p=n(2),h=n(27),j=n(15),b=n(86),f=n.n(b),m=n(5),v=n(1),x=m.a.isStoreApps()?Object(v.jsx)(v.Fragment,{}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{style:{fontSize:"var(--ui-font-size)",textAlign:"center"},children:Object(v.jsx)("a",{href:"https://github.com/MrMYHuang/twdi#web-app",target:"_new",children:"\u7a0b\u5f0f\u5b89\u88dd\u8aaa\u660e"})}),Object(v.jsx)("div",{style:{fontSize:"var(--ui-font-size)",textAlign:"center"},children:Object(v.jsx)("a",{href:"https://github.com/MrMYHuang/twdi#shortcuts",target:"_new",children:"\u7a0b\u5f0f\u6377\u5f91"})})]}),g=function(e){Object(c.a)(s,e);var n=Object(l.a)(s);function s(t){var e;return Object(a.a)(this,s),(e=n.call(this,t)).bookmarkListRef=void 0,e.state={reorder:!1,showToast:!1,toastMessage:""},e.bookmarkListRef=d.a.createRef(),e}return Object(i.a)(s,[{key:"ionViewWillEnter",value:function(){var t=f.a.parse(this.props.location.search);if(t.item&&t.item<this.props.bookmarks.length){var e=this.props.bookmarks[t.item];this.props.history.push("".concat(m.a.pwaUrl,"/dictionary/").concat(e.isChineseHerb?"chineseHerb":"drug","/").concat(e.uuid))}else this.hasBookmark||(this.setState({showToast:!0,toastMessage:"\u7121\u66f8\u7c64\uff01\u8acb\u641c\u5c0b\u85e5\u54c1\u4e26\u52a0\u81f3\u66f8\u7c64\u3002"}),this.props.history.push("".concat(m.a.pwaUrl,"/dictionary/search")))}},{key:"hasBookmark",get:function(){return this.props.bookmarks.length>0}},{key:"delBookmarkHandler",value:function(e){var n=this;this.props.dispatch({type:"DEL_BOOKMARK",uuid:e}),t((function(){n.hasBookmark||(n.setState({showToast:!0,toastMessage:"\u7121\u66f8\u7c64\uff01\u8acb\u641c\u5c0b\u85e5\u54c1\u4e26\u52a0\u81f3\u66f8\u7c64\u3002"}),n.props.history.push("".concat(m.a.pwaUrl,"/dictionary/search")))}))}},{key:"reorderBookmarks",value:function(t){var e=t.detail.complete(this.props.bookmarks);this.props.dispatch({type:"UPDATE_BOOKMARKS",bookmarks:e})}},{key:"getBookmarkRows",value:function(){var t=this,e=this.props.bookmarks,n=Array();return e.forEach((function(e,s){var a,i="".concat(e.\u4e2d\u6587\u54c1\u540d);a="".concat(m.a.pwaUrl,"/dictionary/").concat(e.isChineseHerb?"chineseHerb":"drug","/").concat(e.uuid),n.push(Object(v.jsxs)(p.l,{children:[Object(v.jsxs)(p.i,{button:!0,onClick:function(){var e=Object(o.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.state.reorder){e.next=3;break}return t.setState({showToast:!0,toastMessage:"\u8acb\u5148\u95dc\u9589\u6392\u5217\u529f\u80fd\uff0c\u624d\u53ef\u9ede\u64ca\u66f8\u7c64\uff01"}),e.abrupt("return");case 3:n.preventDefault(),t.props.history.push({pathname:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(v.jsx)("div",{tabIndex:0}),Object(v.jsx)(p.m,{className:"ion-text-wrap uiFont",children:i},"bookmarkItemLabel_"+s),Object(v.jsx)(p.t,{slot:"end"})]},"bookmarkItem_"+s),Object(v.jsx)(p.k,{side:"end",children:Object(v.jsx)(p.j,{style:{fontSize:"var(--ui-font-size)"},color:"danger",onClick:function(n){var s;t.delBookmarkHandler(e.uuid),null===(s=t.bookmarkListRef.current)||void 0===s||s.closeSlidingItems()},children:"\u522a\u9664"})})]},"bookmarkItemSliding_"+s))})),n}},{key:"render",value:function(){var t=this,e=this.getBookmarkRows();return Object(v.jsxs)(p.q,{children:[Object(v.jsx)(p.e,{children:Object(v.jsxs)(p.G,{children:[Object(v.jsx)(p.D,{style:{fontSize:"var(--ui-font-size)"},children:"\u66f8\u7c64"}),Object(v.jsx)(p.c,{fill:this.state.reorder?"solid":"clear",slot:"end",onClick:function(e){return t.setState({reorder:!t.state.reorder})},children:Object(v.jsx)(p.f,{icon:j.y,slot:"icon-only"})})]})}),Object(v.jsxs)(p.d,{children:[this.hasBookmark?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(p.n,{ref:this.bookmarkListRef,children:Object(v.jsx)(p.u,{disabled:!this.state.reorder,onIonItemReorder:function(e){t.reorderBookmarks(e)},children:e})},"bookmarkList0"),x]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(p.n,{children:e},"bookmarkList1"),x]}),Object(v.jsx)(p.E,{cssClass:"uiFont",isOpen:this.state.showToast,onDidDismiss:function(){return t.setState({showToast:!1})},message:this.state.toastMessage,duration:2e3})]})]})}}]),s}(d.a.Component),w=Object(p.R)(g);e.a=Object(h.b)((function(t){return{bookmarks:t.settings.bookmarks}}))(w)}).call(this,n(74).setImmediate)},226:function(t,e,n){var s={"./ion-action-sheet.entry.js":[433,5],"./ion-alert.entry.js":[434,6],"./ion-app_8.entry.js":[435,7],"./ion-avatar_3.entry.js":[436,17],"./ion-back-button.entry.js":[437,18],"./ion-backdrop.entry.js":[438,43],"./ion-button_2.entry.js":[439,19],"./ion-card_5.entry.js":[440,20],"./ion-checkbox.entry.js":[441,21],"./ion-chip.entry.js":[442,22],"./ion-col_3.entry.js":[443,44],"./ion-datetime_3.entry.js":[444,10],"./ion-fab_3.entry.js":[445,23],"./ion-img.entry.js":[446,45],"./ion-infinite-scroll_2.entry.js":[447,46],"./ion-input.entry.js":[448,24],"./ion-item-option_3.entry.js":[449,25],"./ion-item_8.entry.js":[450,26],"./ion-loading.entry.js":[451,27],"./ion-menu_3.entry.js":[452,28],"./ion-modal.entry.js":[453,8],"./ion-nav_2.entry.js":[454,14],"./ion-popover.entry.js":[455,9],"./ion-progress-bar.entry.js":[456,29],"./ion-radio_2.entry.js":[457,30],"./ion-range.entry.js":[458,31],"./ion-refresher_2.entry.js":[459,11],"./ion-reorder_2.entry.js":[460,16],"./ion-ripple-effect.entry.js":[461,47],"./ion-route_4.entry.js":[462,32],"./ion-searchbar.entry.js":[463,33],"./ion-segment_2.entry.js":[464,34],"./ion-select_3.entry.js":[465,35],"./ion-slide_2.entry.js":[466,48],"./ion-spinner.entry.js":[467,13],"./ion-split-pane.entry.js":[468,49],"./ion-tab-bar_2.entry.js":[469,36],"./ion-tab_2.entry.js":[470,15],"./ion-text.entry.js":[471,37],"./ion-textarea.entry.js":[472,38],"./ion-toast.entry.js":[473,39],"./ion-toggle.entry.js":[474,12],"./ion-virtual-scroll.entry.js":[475,50]};function r(t){if(!n.o(s,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=s[t],r=e[0];return n.e(e[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(s)},r.id=226,t.exports=r},228:function(t,e,n){var s={"./ion-icon.entry.js":[476,57]};function r(t){if(!n.o(s,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=s[t],r=e[0];return n.e(e[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(s)},r.id=228,t.exports=r},255:function(t,e){},257:function(t,e){},290:function(t,e){},292:function(t,e){},320:function(t,e){},322:function(t,e){},323:function(t,e){},328:function(t,e){},330:function(t,e){},336:function(t,e){},338:function(t,e){},357:function(t,e){},369:function(t,e){},372:function(t,e){},392:function(t,e,n){},410:function(t,e,n){},431:function(t,e,n){"use strict";n.r(e);var s=n(0),r=n.n(s),o=n(42),a=n.n(o),i=n(83),c=n(3),l=n.n(c),u=n(8),d=n(26),p=n(6),h=n(9),j=n(10),b=n(11),f=n(18),m=n(2),v=n(212),x=n(27),g=n(86),w=n.n(g),O=n(71),y=n(43),k=n(5),S=function t(){Object(p.a)(this,t),this.version=1,this.hasAppLog=!0,this.theme=0,this.fontSize=32,this.uiFontSize=24,this.voiceURI=null,this.speechRate=.8,this.bookmarks=[],this.dictionaryHistory=[]};function D(t){for(;document.body.classList.length>0;)document.body.classList.remove(document.body.classList.item(0));document.body.classList.toggle("theme".concat(t.theme),!0),k.a.updateCssVars(t)}var C=Object(O.a)({settings:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new S,e=arguments.length>1?arguments[1]:void 0,n=Object(d.a)({},t);switch(e.type){case"LOAD_SETTINGS":D(n=JSON.parse(localStorage.getItem(k.a.storeFile)).settings);break;case"SET_KEY_VAL":var s=e.key,r=e.val;switch(s){case"theme":document.body.classList.forEach((function(t){/theme/.test(t)&&document.body.classList.remove(t)})),document.body.classList.toggle("theme".concat(r),!0)}n[s]=r,localStorage.setItem(k.a.storeFile,JSON.stringify({settings:n}));break;case"ADD_BOOKMARK":n.bookmarks=[].concat(Object(y.a)(n.bookmarks),[e.bookmark]),localStorage.setItem(k.a.storeFile,JSON.stringify({settings:n}));break;case"DEL_BOOKMARK":var o=n.bookmarks,a=o.findIndex((function(t){return t.uuid===e.uuid}));-1!==a&&o.splice(a,1),n.bookmarks=Object(y.a)(o),localStorage.setItem(k.a.storeFile,JSON.stringify({settings:n}));break;case"UPDATE_BOOKMARKS":n.bookmarks=e.bookmarks,localStorage.setItem(k.a.storeFile,JSON.stringify({settings:n}));break;case"DEFAULT_SETTINGS":D(n=new S);break;default:0===Object.keys(n).length&&(n=new S);var i=new S;Object.keys(i).forEach((function(t){void 0===n[t]&&(n[t]=i[t])}))}return n},tmpSettings:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=Object(d.a)({},t),s=e.key,r=e.val;switch(n[s]=r,e.type){case"TMP_SET_KEY_VAL":return n}return t}});var T=n(15),A=(n(382),n(383),n(384),n(385),n(386),n(387),n(388),n(389),n(390),n(391),n(392),n(215)),E=n(217),I=n(1),F=function(t){Object(j.a)(n,t);var e=Object(b.a)(n);function n(t){var s;return Object(p.a)(this,n),(s=e.call(this,t)).searchBarRef=void 0,s.filteredData=void 0,s.mode="",s.page=0,s.rows=20,s.state={keyword:"",searches:[],showNoSelectedTextAlert:!1,popover:{show:!1,event:null},isScrollOn:!1,fetchError:!1,showToast:!1,toastMessage:""},s.searchBarRef=r.a.createRef(),s.filteredData=[],s}return Object(h.a)(n,[{key:"ionViewWillEnter",value:function(){var t=this;this.mode=this.props.match.params.mode;var e=this.props.match.params.keyword;this.setState({keyword:e},(function(){t.search(!0)}))}},{key:"isTopPage",get:function(){return void 0===this.props.match.params.keyword}},{key:"search",value:function(){var t=Object(u.a)(l.a.mark((function t(){var e,n,s,r=this,o=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]&&o[0],t.next=3,new Promise((function(t,e){var n=setInterval((function(){r.props.loadingTwdData||(clearInterval(n),t())}),50)}));case 3:if(null!=this.props.match.params.keyword&&this.props.match.params.keyword===this.state.keyword){t.next=5;break}return t.abrupt("return");case 5:return e&&(n=new RegExp(".*".concat(this.props.match.params.keyword,".*"),"i"),"searchCH"!==this.mode?this.filteredData=k.a.dictItems.filter((function(t){return"null"!==t.\u901a\u95dc\u7c3d\u5be9\u6587\u4ef6\u7de8\u865f&&(n.test(t.\u4e2d\u6587\u54c1\u540d)||n.test(t.\u82f1\u6587\u54c1\u540d)||n.test(t.\u901a\u95dc\u7c3d\u5be9\u6587\u4ef6\u7de8\u865f)||n.test(t.\u88fd\u9020\u5546\u540d\u7a31)||n.test(t.\u4e3b\u6210\u5206\u7565\u8ff0))})):this.filteredData=k.a.chineseHerbsItems.filter((function(t){return n.test(t.\u85e5\u54c1\u540d\u7a31)||n.test(t.\u8655\u65b9\u6210\u5206)||n.test(t.\u8a31\u53ef\u8b49\u5b57\u865f)||n.test(t.\u88fd\u9020\u5546\u540d\u7a31)})),this.page=0),console.log("Loading page ".concat(this.page)),s=this.filteredData.slice(this.page*this.rows,(this.page+1)*this.rows),this.page+=1,this.setState({fetchError:!1,searches:e?s:[].concat(Object(y.a)(this.state.searches),Object(y.a)(s)),isScrollOn:this.state.searches.length<this.filteredData.length}),e&&(this.props.dictionaryHistory.unshift(this.state.keyword),this.props.dictionaryHistory.splice(10),this.props.dispatch({type:"SET_KEY_VAL",key:"dictionaryHistory",val:this.props.dictionaryHistory})),t.abrupt("return",!0);case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getRows",value:function(){var t=this,e=this.state.searches,n=Array();return e.forEach((function(e,s){var r="searchCH"!==t.mode?e.\u901a\u95dc\u7c3d\u5be9\u6587\u4ef6\u7de8\u865f:/[^\d]*(\d*)/.exec(e.\u8a31\u53ef\u8b49\u5b57\u865f)[1];n.push(Object(I.jsxs)(m.i,{button:!0,onClick:function(){var e=Object(u.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),t.props.history.push({pathname:"".concat(k.a.pwaUrl,"/dictionary/").concat("searchCH"===t.mode?"chineseHerb":"drug","/").concat(r)});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(I.jsx)("div",{tabIndex:0}),Object(I.jsx)(m.m,{className:"ion-text-wrap uiFont",children:"searchCH"!==t.mode?e.\u4e2d\u6587\u54c1\u540d:e.\u85e5\u54c1\u540d\u7a31},"bookmarkItemLabel_"+s)]},"dictItem"+s))})),n}},{key:"render",value:function(){var t=this;return Object(I.jsxs)(m.q,{children:[Object(I.jsx)(m.e,{children:Object(I.jsxs)(m.G,{children:[Object(I.jsx)(m.c,{hidden:this.isTopPage,fill:"clear",slot:"start",onClick:function(e){return t.props.history.goBack()},children:Object(I.jsx)(m.f,{icon:T.a,slot:"icon-only"})}),Object(I.jsx)(m.D,{style:{fontSize:"var(--ui-font-size)"},children:"\u641c\u5c0b\u85e5\u54c1"}),Object(I.jsx)(m.c,{fill:"outline",shape:"round",slot:"start",onClick:function(e){t.props.history.push({pathname:"".concat(k.a.pwaUrl,"/dictionary/").concat("searchCH"===t.mode?"search":"searchCH")})},children:Object(I.jsx)("span",{className:"uiFont",children:"searchCH"!==this.mode?"\u897f\u85e5":"\u4e2d\u85e5"})}),Object(I.jsx)(m.c,{fill:"clear",slot:"end",onClick:function(e){t.props.dispatch({type:"TMP_SET_KEY_VAL",key:"shareTextModal",val:{show:!0,text:decodeURIComponent(window.location.href)}})},children:Object(I.jsx)(m.f,{icon:T.x,slot:"icon-only"})})]})}),Object(I.jsxs)(m.d,{children:[Object(I.jsx)(m.x,{ref:this.searchBarRef,placeholder:"\u6309Enter\u9375\u641c\u5c0b",value:this.state.keyword,onIonClear:function(e){t.props.history.push({pathname:"".concat(k.a.pwaUrl,"/dictionary/").concat(t.mode)})},onKeyUp:function(e){var n=e.target.value;t.setState({keyword:n},(function(){""===n||"Enter"===e.key&&(n===t.props.match.params.keyword?t.search(!0):t.props.history.push({pathname:"".concat(k.a.pwaUrl,"/dictionary/").concat(t.mode,"/").concat(n)}))}))}}),this.props.loadingTwdData?Object(I.jsx)(m.o,{cssClass:"uiFont",isOpen:this.props.loadingTwdData,message:"\u8f09\u5165\u4e2d..."}):null==this.props.match.params.keyword||this.state.searches.length<1||this.props.dictionaryHistory.length>0&&(""===this.state.keyword||void 0===this.state.keyword)?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("div",{className:"uiFont",style:{color:"var(--ion-color-primary)"},children:"\u641c\u5c0b\u6b77\u53f2"}),Object(I.jsx)(m.n,{children:this.props.dictionaryHistory.map((function(e,n){return Object(I.jsx)(m.i,{button:!0,onClick:function(){var n=Object(u.a)(l.a.mark((function n(s){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e===t.props.match.params.keyword||t.props.history.push({pathname:"".concat(k.a.pwaUrl,"/dictionary/").concat(t.mode,"/").concat(e)});case 1:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),children:Object(I.jsx)(m.m,{className:"ion-text-wrap uiFont",children:e},"dictHistoryLabel_"+n)},"dictHistoryItem_".concat(n))}))}),Object(I.jsx)("div",{style:{textAlign:"center"},children:Object(I.jsx)(m.c,{fill:"outline",shape:"round",size:"large",onClick:function(e){t.setState({keyword:""}),t.props.dispatch({type:"SET_KEY_VAL",key:"dictionaryHistory",val:[]})},children:"\u6e05\u9664\u6b77\u53f2"})})]}):Object(I.jsxs)(m.n,{children:[this.getRows(),Object(I.jsx)(m.g,{threshold:"100px",disabled:!this.state.isScrollOn,onIonInfinite:function(e){t.search(),e.target.complete()},children:Object(I.jsx)(m.h,{loadingText:"\u8f09\u5165\u4e2d..."})})]}),Object(I.jsx)(m.a,{cssClass:"uiFont",isOpen:this.state.showNoSelectedTextAlert,backdropDismiss:!1,header:"\u5931\u6557",message:"\u8acb\u78ba\u8a8d\u662f\u5426\u5df2\u9078\u64c7\u4e00\u6bb5\u6587\u5b57\uff0c\u7136\u5f8c\u518d\u57f7\u884c\u6240\u9078\u7684\u529f\u80fd!",buttons:[{text:"\u78ba\u5b9a",cssClass:"primary uiFont",handler:function(e){t.setState({showNoSelectedTextAlert:!1})}}]}),Object(I.jsx)(m.E,{cssClass:"uiFont",isOpen:this.state.showToast,onDidDismiss:function(){return t.setState({showToast:!1})},message:this.state.toastMessage,duration:2e3})]})]})}}]),n}(r.a.Component),_=Object(m.R)(F),L=Object(x.b)((function(t){return{loadingTwdData:t.tmpSettings.loadingTwdData,dictionaryHistory:t.settings.dictionaryHistory}}))(_),M=n(218),N=function(t){Object(j.a)(n,t);var e=Object(b.a)(n);function n(t){var s;return Object(p.a)(this,n),(s=e.call(this,t)).state={isAppSettingsExport:Array(Object.keys(k.a.appSettings).length)},s}return Object(h.a)(n,[{key:"updateQrCode",value:function(){var t=this,e=Object.keys(k.a.appSettings).filter((function(e,n){return t.state.isAppSettingsExport[n]})).map((function(e,n){return{key:e,val:t.props.settings[e]}})).map((function(t){return"".concat(t.key,"=").concat(+t.val)})).join(",");e=""!==e?"settings=".concat(e):null;var n=this.props.text,s=/\?/.test(n);e&&(n+=s?"&".concat(e):"?".concat(e)),k.a.copyToClipboard(n);var r=document.getElementById("qrcCanvas");return M.toCanvas(r,n),r}},{key:"render",value:function(){var t=this;return Object(I.jsx)(m.p,{isOpen:this.props.showModal,cssClass:"uiFont",swipeToClose:!0,onWillPresent:function(){for(var e=[],n=0;n<t.state.isAppSettingsExport.length;n++)e.push(!1);t.setState({isAppSettingsExport:e},(function(){t.updateQrCode()}))},onDidDismiss:function(){return t.props.finish()},children:Object(I.jsx)(m.d,{children:Object(I.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%",alignItems:"center"},children:[Object(I.jsx)("div",{children:Object(I.jsx)(m.m,{className:"uiFont",children:"\u6b64\u9801app\u9023\u7d50\u5df2\u8907\u88fd\u81f3\u526a\u8cbc\u7c3f\uff01"})}),Object(I.jsx)("div",{children:Object(I.jsx)(m.m,{className:"uiFont",children:"\u4e5f\u53ef\u4ee5\u4f7f\u7528QR Code\u5206\u4eab:"})}),Object(I.jsx)("div",{style:{flexGrow:1,flexShrink:0,display:"flex",alignItems:"center",margin:10},children:Object(I.jsx)("canvas",{id:"qrcCanvas",width:"500",height:"500",style:{margin:"0px auto"}})}),Object(I.jsxs)("div",{children:[Object(I.jsx)(m.m,{className:"uiFont",children:"\u5305\u62ecapp\u8a2d\u5b9a:"}),Object(I.jsx)(m.n,{children:Object.keys(k.a.appSettings).map((function(e,n){return Object(I.jsxs)(m.i,{children:[Object(I.jsx)(m.m,{className:"ion-text-wrap uiFont",children:k.a.appSettings[e]}),Object(I.jsx)(m.F,{slot:"end",onIonChange:function(e){var s=t.state.isAppSettingsExport;s[n]=e.detail.checked,t.setState({isAppSettingsExport:s},(function(){t.updateQrCode()}))}})]},"appSettingExportItem_".concat(n))}))})]}),Object(I.jsx)("div",{children:Object(I.jsx)(m.c,{fill:"outline",shape:"round",size:"large",onClick:function(){return t.props.finish()},children:"\u95dc\u9589"})})]})})})}}]),n}(r.a.Component),R=Object(x.b)((function(t){return{settings:t.settings}}))(N),B=function(t){Object(j.a)(n,t);var e=Object(b.a)(n);function n(t){var s;return Object(p.a)(this,n),(s=e.call(this,t)).state={},s}return Object(h.a)(n,[{key:"render",value:function(){return Object(I.jsx)(m.p,{isOpen:this.props.showModal,cssClass:"uiFont",backdropDismiss:!1,swipeToClose:!1,children:Object(I.jsx)(m.d,{children:Object(I.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%",alignItems:"center"},children:[Object(I.jsxs)(m.m,{className:"uiFont",children:[this.props.item,"\u4e0b\u8f09\u4e2d\uff0c\u8acb\u7b49\u5f85\u3002"]}),Object(I.jsx)(m.r,{style:{height:"40px"},value:this.props.progress/100}),Object(I.jsxs)(m.m,{className:"uiFont",children:[Math.floor(this.props.progress),"%"]})]})})})}}]),n}(r.a.Component),z=Object(x.b)((function(t){return{}}))(B),U=function t(e){Object(p.a)(this,t),this.uuid="",this.\u4e2d\u6587\u54c1\u540d="",this.isChineseHerb=!1,this.uuid=e.uuid,this.\u4e2d\u6587\u54c1\u540d=e.\u4e2d\u6587\u54c1\u540d,this.isChineseHerb=e.isChineseHerb},H=function t(e){Object(p.a)(this,t),this.\u901a\u95dc\u7c3d\u5be9\u6587\u4ef6\u7de8\u865f=void 0,this.\u4e2d\u6587\u54c1\u540d=void 0,this.\u82f1\u6587\u54c1\u540d=void 0,this.\u9069\u61c9\u75c7=void 0,this.\u5291\u578b=void 0,this.\u7ba1\u5236\u85e5\u54c1\u5206\u985e\u7d1a\u5225=void 0,this.\u7528\u6cd5\u7528\u91cf=void 0,this.\u5305\u88dd=void 0,this.\u5305\u88dd\u8207\u570b\u969b\u689d\u78bc=void 0,this.\u6709\u6548\u65e5\u671f=void 0,this.\u767c\u8b49\u65e5\u671f=void 0,this.\u8a31\u53ef\u8b49\u5b57\u865f=void 0,this.\u8a31\u53ef\u8b49\u7a2e\u985e=void 0,this.\u820a\u8b49\u5b57\u865f=void 0,this.\u85e5\u54c1\u985e\u5225=void 0,this.\u4e3b\u6210\u5206\u7565\u8ff0=void 0,this.\u7570\u52d5\u65e5\u671f=void 0,this.\u7533\u8acb\u5546\u540d\u7a31=void 0,this.\u7533\u8acb\u5546\u5730\u5740=void 0,this.\u7533\u8acb\u5546\u7d71\u4e00\u7de8\u865f=void 0,this.\u88fd\u9020\u5546\u540d\u7a31=void 0,this.\u88fd\u9020\u5ee0\u570b\u5225=void 0,this.\u88fd\u9020\u5ee0\u5ee0\u5740=void 0,this.\u88fd\u9020\u5ee0\u516c\u53f8\u5730\u5740=void 0,this.\u88fd\u7a0b=void 0,this.\u8a3b\u92b7\u72c0\u614b=void 0,this.\u8a3b\u92b7\u65e5\u671f=void 0,this.\u8a3b\u92b7\u7406\u7531=void 0,this.\u88fd\u9020\u5ee0\u5ee0\u5740=e.\u88fd\u9020\u5ee0\u5ee0\u5740,this.\u8a31\u53ef\u8b49\u7a2e\u985e=e.\u8a31\u53ef\u8b49\u7a2e\u985e,this.\u8a31\u53ef\u8b49\u5b57\u865f=e.\u8a31\u53ef\u8b49\u5b57\u865f,this.\u8a3b\u92b7\u7406\u7531=e.\u8a3b\u92b7\u7406\u7531,this.\u5291\u578b=e.\u5291\u578b,this.\u901a\u95dc\u7c3d\u5be9\u6587\u4ef6\u7de8\u865f=e.\u901a\u95dc\u7c3d\u5be9\u6587\u4ef6\u7de8\u865f,this.\u820a\u8b49\u5b57\u865f=e.\u820a\u8b49\u5b57\u865f,this.\u767c\u8b49\u65e5\u671f=e.\u767c\u8b49\u65e5\u671f,this.\u7570\u52d5\u65e5\u671f=e.\u7570\u52d5\u65e5\u671f,this.\u88fd\u9020\u5546\u540d\u7a31=e.\u88fd\u9020\u5546\u540d\u7a31,this.\u4e3b\u6210\u5206\u7565\u8ff0=e.\u4e3b\u6210\u5206\u7565\u8ff0,this.\u7ba1\u5236\u85e5\u54c1\u5206\u985e\u7d1a\u5225=e.\u7ba1\u5236\u85e5\u54c1\u5206\u985e\u7d1a\u5225,this.\u6709\u6548\u65e5\u671f=e.\u6709\u6548\u65e5\u671f,this.\u88fd\u9020\u5ee0\u570b\u5225=e.\u88fd\u9020\u5ee0\u570b\u5225,this.\u8a3b\u92b7\u72c0\u614b=e.\u8a3b\u92b7\u72c0\u614b,this.\u85e5\u54c1\u985e\u5225=e.\u85e5\u54c1\u985e\u5225,this.\u9069\u61c9\u75c7=e.\u9069\u61c9\u75c7,this.\u88fd\u9020\u5ee0\u516c\u53f8\u5730\u5740=e.\u88fd\u9020\u5ee0\u516c\u53f8\u5730\u5740,this.\u82f1\u6587\u54c1\u540d=e.\u82f1\u6587\u54c1\u540d,this.\u5305\u88dd\u8207\u570b\u969b\u689d\u78bc=e.\u5305\u88dd\u8207\u570b\u969b\u689d\u78bc,this.\u7533\u8acb\u5546\u5730\u5740=e.\u7533\u8acb\u5546\u5730\u5740,this.\u5305\u88dd=e.\u5305\u88dd,this.\u7533\u8acb\u5546\u7d71\u4e00\u7de8\u865f=e.\u7533\u8acb\u5546\u7d71\u4e00\u7de8\u865f,this.\u4e2d\u6587\u54c1\u540d=e.\u4e2d\u6587\u54c1\u540d,this.\u7528\u6cd5\u7528\u91cf=e.\u7528\u6cd5\u7528\u91cf,this.\u7533\u8acb\u5546\u540d\u7a31=e.\u7533\u8acb\u5546\u540d\u7a31,this.\u88fd\u7a0b=e.\u88fd\u7a0b,this.\u8a3b\u92b7\u65e5\u671f=e.\u8a3b\u92b7\u65e5\u671f};H.sortedKeys=["\u4e2d\u6587\u54c1\u540d","\u82f1\u6587\u54c1\u540d","\u901a\u95dc\u7c3d\u5be9\u6587\u4ef6\u7de8\u865f","\u9069\u61c9\u75c7","\u7528\u6cd5\u7528\u91cf","\u4e3b\u6210\u5206\u7565\u8ff0","\u5291\u578b","\u5305\u88dd","\u5305\u88dd\u8207\u570b\u969b\u689d\u78bc","\u85e5\u54c1\u985e\u5225","\u7ba1\u5236\u85e5\u54c1\u5206\u985e\u7d1a\u5225","\u8a31\u53ef\u8b49\u5b57\u865f","\u8a31\u53ef\u8b49\u7a2e\u985e","\u767c\u8b49\u65e5\u671f","\u6709\u6548\u65e5\u671f","\u7570\u52d5\u65e5\u671f","\u820a\u8b49\u5b57\u865f","\u88fd\u7a0b","\u8a3b\u92b7\u72c0\u614b","\u8a3b\u92b7\u65e5\u671f","\u8a3b\u92b7\u7406\u7531","\u7533\u8acb\u5546\u540d\u7a31","\u7533\u8acb\u5546\u5730\u5740","\u7533\u8acb\u5546\u7d71\u4e00\u7de8\u865f","\u88fd\u9020\u5546\u540d\u7a31","\u88fd\u9020\u5ee0\u570b\u5225","\u88fd\u9020\u5ee0\u5ee0\u5740","\u88fd\u9020\u5ee0\u516c\u53f8\u5730\u5740"];var P=function t(e){Object(p.a)(this,t),this.\u8a31\u53ef\u8b49\u5b57\u865f=void 0,this.\u9650\u5236\u9805\u76ee=void 0,this.\u85e5\u54c1\u540d\u7a31=void 0,this.\u5291\u578b\u8207\u985e\u5225=void 0,this.\u9069\u61c9\u75c7\u53ca\u6548\u80fd=void 0,this.\u8655\u65b9\u6210\u5206=void 0,this["\u55ae/\u8907\u65b9"]=void 0,this.\u5305\u88dd=void 0,this.\u85e5\u5546\u540d\u7a31=void 0,this.\u88fd\u9020\u5546\u540d\u7a31=void 0,this.\u88fd\u9020\u5546\u5730\u5740=void 0,this.\u767c\u8b49\u65e5\u671f=void 0,this.\u6709\u6548\u65e5\u671f=void 0,this.\u8a31\u53ef\u8b49\u5b57\u865f=e.\u8a31\u53ef\u8b49\u5b57\u865f,this.\u9650\u5236\u9805\u76ee=e.\u9650\u5236\u9805\u76ee,this.\u85e5\u54c1\u540d\u7a31=e.\u85e5\u54c1\u540d\u7a31,this.\u5291\u578b\u8207\u985e\u5225=e.\u5291\u578b\u8207\u985e\u5225,this.\u9069\u61c9\u75c7\u53ca\u6548\u80fd=e.\u9069\u61c9\u75c7\u53ca\u6548\u80fd,this.\u8655\u65b9\u6210\u5206=e.\u8655\u65b9\u6210\u5206,this["\u55ae/\u8907\u65b9"]=e.\u55ae\u8907\u65b9,this.\u5305\u88dd=e.\u5305\u88dd,this.\u85e5\u5546\u540d\u7a31=e.\u85e5\u5546\u540d\u7a31,this.\u88fd\u9020\u5546\u540d\u7a31=e.\u88fd\u9020\u5546\u540d\u7a31,this.\u88fd\u9020\u5546\u5730\u5740=e.\u88fd\u9020\u5546\u5730\u5740,this.\u767c\u8b49\u65e5\u671f=e.\u767c\u8b49\u65e5\u671f,this.\u6709\u6548\u65e5\u671f=e.\u6709\u6548\u65e5\u671f};P.sortedKeys=["\u85e5\u54c1\u540d\u7a31","\u9069\u61c9\u75c7\u53ca\u6548\u80fd","\u9650\u5236\u9805\u76ee","\u8655\u65b9\u6210\u5206","\u55ae/\u8907\u65b9","\u5291\u578b\u8207\u985e\u5225","\u5305\u88dd","\u85e5\u5546\u540d\u7a31","\u88fd\u9020\u5546\u540d\u7a31","\u88fd\u9020\u5546\u5730\u5740","\u8a31\u53ef\u8b49\u5b57\u865f","\u767c\u8b49\u65e5\u671f","\u6709\u6548\u65e5\u671f"];var K=function(t){Object(j.a)(n,t);var e=Object(b.a)(n);function n(t){var s;return Object(p.a)(this,n),(s=e.call(this,t)).mode="",s.state={keyword:"",search:null,showNoSelectedTextAlert:!1,popover:{show:!1,event:null},showToast:!1,toastMessage:""},s}return Object(h.a)(n,[{key:"ionViewWillEnter",value:function(){this.mode=this.props.match.params.mode,this.props.match.params.keyword&&this.setState({keyword:this.props.match.params.keyword}),this.lookupDict(this.props.match.params.keyword)}},{key:"componentDidMount",value:function(){}},{key:"ionViewWillLeave",value:function(){}},{key:"isTopPage",get:function(){return this.props.match.url==="/".concat(this.props.match.params.tab)}},{key:"lookupDict",value:function(){var t=Object(u.a)(l.a.mark((function t(e){var n,s,r=this;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t,e){var n=setInterval((function(){r.props.loadingTwdData||(clearInterval(n),t())}),50)}));case 2:n=new RegExp(".*".concat(e)),s=("chineseHerb"!==this.mode?k.a.dictItems.find((function(t){return t.\u901a\u95dc\u7c3d\u5be9\u6587\u4ef6\u7de8\u865f===e})):k.a.chineseHerbsItems.find((function(t){return n.test(t.\u8a31\u53ef\u8b49\u5b57\u865f)})))||null,this.setState({search:s});case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"addBookmarkHandler",value:function(){var t=this.state.search,e="chineseHerb"!==this.mode?t.\u901a\u95dc\u7c3d\u5be9\u6587\u4ef6\u7de8\u865f:t.\u8a31\u53ef\u8b49\u5b57\u865f,n="chineseHerb"!==this.mode?t.\u4e2d\u6587\u54c1\u540d:t.\u85e5\u54c1\u540d\u7a31;this.props.dispatch({type:"ADD_BOOKMARK",bookmark:new U({uuid:e,"\u4e2d\u6587\u54c1\u540d":n,isChineseHerb:"chineseHerb"===this.mode})}),this.setState({showToast:!0,toastMessage:"\u66f8\u7c64\u65b0\u589e\u6210\u529f\uff01"})}},{key:"render",value:function(){var t=this,e=[];if(this.props.match.params.keyword&&null!=this.state.search){var n=this.state.search;("chineseHerb"!==this.mode?H:P).sortedKeys.forEach((function(s,r){var o=n[s];e.push(Object(I.jsxs)(m.i,{button:!0,onClick:function(){var e=Object(u.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),k.a.copyToClipboard(o),t.setState({showToast:!0,toastMessage:'\u8907\u88fd"'.concat(s,'"\u6210\u529f')});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(I.jsx)("div",{tabIndex:0}),Object(I.jsxs)(m.m,{className:"ion-text-wrap textFont",children:[s,": ",o]},"contentItemlabel_"+r)]},"contentItem"+r))}))}return Object(I.jsxs)(m.q,{children:[Object(I.jsx)(m.e,{children:Object(I.jsxs)(m.G,{children:[Object(I.jsx)(m.c,{fill:"clear",slot:"start",onClick:function(e){return t.props.history.goBack()},children:Object(I.jsx)(m.f,{icon:T.a,slot:"icon-only"})}),Object(I.jsx)(m.D,{style:{fontSize:"var(--ui-font-size)"},children:"\u85e5\u54c1\u8cc7\u6599"}),Object(I.jsx)(m.c,{fill:"clear",slot:"end",onClick:function(e){t.props.dispatch({type:"TMP_SET_KEY_VAL",key:"shareTextModal",val:{show:!0,text:decodeURIComponent(window.location.href)}})},children:Object(I.jsx)(m.f,{icon:T.x,slot:"icon-only"})}),Object(I.jsx)(m.c,{hidden:this.props.loadingTwdData,fill:"clear",slot:"end",onClick:function(e){t.setState({popover:{show:!1,event:null}}),t.addBookmarkHandler()},children:Object(I.jsx)(m.f,{icon:T.c,slot:"icon-only"})})]})}),Object(I.jsxs)(m.d,{children:[Object(I.jsx)(m.o,{cssClass:"uiFont",isOpen:this.props.loadingTwdData,message:"\u8f09\u5165\u4e2d..."}),Object(I.jsx)(m.n,{children:e},"contentList1"),Object(I.jsx)(m.E,{cssClass:"uiFont",isOpen:this.state.showToast,onDidDismiss:function(){return t.setState({showToast:!1})},message:this.state.toastMessage,duration:2e3})]})]})}}]),n}(r.a.Component),V=Object(m.R)(K),Y=Object(x.b)((function(t){return{loadingTwdData:t.tmpSettings.loadingTwdData}}))(V),W=window.electronBackendApi,q=function(){var t=localStorage.getItem(k.a.storeFile);return null!=t?Object(O.b)(C,JSON.parse(t)):Object(O.b)(C)}();Object(m.Q)({mode:"md",swipeBackEnabled:!1});var J={onSuccess:function(t){},onUpdate:function(t){}},G=function(t){Object(j.a)(n,t);var e=Object(b.a)(n);function n(){return Object(p.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(I.jsx)(x.a,{store:q,children:Object(I.jsx)($,Object(d.a)({},this.props))})}}]),n}(r.a.Component),Q=function(t){Object(j.a)(n,t);var e=Object(b.a)(n);function n(t){var s;for(Object(p.a)(this,n),(s=e.call(this,t)).registrationNew=void 0,s.originalAppSettingsStr=void 0,s.wakeLock=void 0,s.props.settings.hasAppLog||k.a.disableAppLog(),null===W||void 0===W||W.receive("fromMain",(function(t){switch(t.event){case"version":q.dispatch({type:"TMP_SET_KEY_VAL",key:"mainVersion",val:t.version})}})),null===W||void 0===W||W.send("toMain",{event:"ready"}),s.registrationNew=null;document.body.classList.length>0;)document.body.classList.remove(document.body.classList.item(0));document.body.classList.toggle("theme".concat(s.props.settings.theme),!0);var r=w.a.parse(s.props.location.search);return r.settings&&(s.originalAppSettingsStr=localStorage.getItem(k.a.storeFile),r.settings.split(",").forEach((function(t){var e=t.split("=");s.props.dispatch({type:"SET_KEY_VAL",key:e[0],val:+e[1]})}))),k.a.updateCssVars(s.props.settings),s.state={showUpdateAlert:!1,showRestoreAppSettingsToast:null!=r.settings&&null!=s.originalAppSettingsStr||!1,showToast:!1,showDataDownloadEndAlert:!1,toastMessage:"",downloadModal:{progress:0,show:!1}},J.onUpdate=function(t){s.registrationNew=t,s.setState({showUpdateAlert:!0})},J.onSuccess=function(t){},"undefined"!==typeof speechSynthesis&&(speechSynthesis.getVoices(),speechSynthesis.cancel()),navigator.wakeLock&&(s.wakeLockScreen(),document.addEventListener("visibilitychange",Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"visible"===document.visibilityState?s.wakeLockScreen():s.wakeLockScreenRelease();case 1:case"end":return t.stop()}}),t)}))))),indexedDB.open(k.a.twdiDb).onupgradeneeded=function(t){t.target.result.createObjectStore("store"),console.log("DB store created.")},s.loadTwdData(),s}return Object(h.a)(n,[{key:"restoreAppSettings",value:function(){localStorage.setItem(k.a.storeFile,this.originalAppSettingsStr),this.props.dispatch({type:"LOAD_SETTINGS"})}},{key:"loadTwdData",value:function(){var t=Object(u.a)(l.a.mark((function t(){var e,n,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:q.dispatch({type:"TMP_SET_KEY_VAL",key:"loadingTwdData",val:!0}),n=0;case 2:if(!(n<k.a.durgResources.length)){t.next=20;break}return s=k.a.durgResources[n],t.prev=4,t.next=7,k.a.getFileFromIndexedDB(s.dataKey);case 7:e=t.sent,t.next=16;break;case 10:return t.prev=10,t.t0=t.catch(4),t.next=14,k.a.downloadTwdData(s.url,function(){var t=Object(u.a)(l.a.mark((function t(e){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 14:e=t.sent,k.a.saveFileToIndexedDB(s.dataKey,e);case 16:0===n?k.a.dictItems=e:k.a.chineseHerbsItems=e;case 17:n++,t.next=2;break;case 20:q.dispatch({type:"TMP_SET_KEY_VAL",key:"loadingTwdData",val:!1});case 21:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(){return t.apply(this,arguments)}}()},{key:"wakeLockScreen",value:function(){var t=Object(u.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,null==(e=navigator.wakeLock)){t.next=9;break}return t.next=5,e.request("screen");case 5:this.wakeLock=t.sent,console.log("Screen wake lock is requested."),t.next=10;break;case 9:console.error("navigator.wakeLock is undefined.");case 10:t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.log("".concat(t.t0.name,", ").concat(t.t0.message)),console.log((new Error).stack);case 16:case"end":return t.stop()}}),t,this,[[0,12]])})));return function(){return t.apply(this,arguments)}}()},{key:"wakeLockScreenRelease",value:function(){var t=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==this.wakeLock){t.next=5;break}return t.next=3,this.wakeLock.release();case 3:this.wakeLock=null,console.log("Screen wake lock is released.");case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"routeByQueryString",value:function(){console.log(window.location.search);var t=/route=([^&]*)/.exec(window.location.search),e=/query=([^&]*)/.exec(window.location.search);if(null!==t){var n=decodeURIComponent(t[1]),s="";return null!==e&&(s=decodeURIComponent(e[1])),Object(I.jsx)(f.a,{to:"".concat(k.a.pwaUrl)+n+s})}if(window.location.pathname==="".concat(k.a.pwaUrl,"/")||window.location.pathname==="".concat(k.a.pwaUrl))return Object(I.jsx)(f.a,{to:"".concat(k.a.pwaUrl,"/bookmarks")})}},{key:"render",value:function(){var t,e,n=this;return Object(I.jsxs)(m.b,{children:[Object(I.jsx)(v.a,{children:Object(I.jsxs)(m.C,{children:[Object(I.jsxs)(m.w,{animated:!1,children:[Object(I.jsx)(f.b,{path:"".concat(k.a.pwaUrl,"/:tab(bookmarks)"),render:function(t){return Object(I.jsx)(E.a,Object(d.a)({},t))},exact:!0}),Object(I.jsx)(f.b,{path:"".concat(k.a.pwaUrl,"/:tab(dictionary)/:mode(search)/:keyword?"),render:function(t){return Object(I.jsx)(L,Object(d.a)({},t))},exact:!0}),Object(I.jsx)(f.b,{path:"".concat(k.a.pwaUrl,"/:tab(dictionary)/:mode(searchCH)/:keyword?"),render:function(t){return Object(I.jsx)(L,Object(d.a)({},t))},exact:!0}),Object(I.jsx)(f.b,{path:"".concat(k.a.pwaUrl,"/:tab(dictionary)/:mode(drug)/:keyword?"),render:function(t){return Object(I.jsx)(Y,Object(d.a)({},t))},exact:!0}),Object(I.jsx)(f.b,{path:"".concat(k.a.pwaUrl,"/:tab(dictionary)/:mode(chineseHerb)/:keyword?"),render:function(t){return Object(I.jsx)(Y,Object(d.a)({},t))},exact:!0}),Object(I.jsx)(f.b,{path:"".concat(k.a.pwaUrl,"/settings"),render:function(t){return Object(I.jsx)(A.a,Object(d.a)({},t))}}),Object(I.jsx)(f.b,{path:"".concat(k.a.pwaUrl,"/"),render:function(){return n.routeByQueryString()},exact:!0})]}),Object(I.jsxs)(m.A,{slot:"bottom",children:[Object(I.jsx)(m.B,{tab:"bookmarks",href:"".concat(k.a.pwaUrl,"/bookmarks"),children:Object(I.jsx)(m.f,{icon:T.c})}),Object(I.jsx)(m.B,{tab:"dictionay",href:"".concat(k.a.pwaUrl,"/dictionary/search"),children:Object(I.jsx)(m.f,{icon:T.t})}),Object(I.jsx)(m.B,{tab:"settings",href:"".concat(k.a.pwaUrl,"/settings"),children:Object(I.jsx)(m.f,{icon:T.w})})]})]})}),Object(I.jsx)(m.a,{cssClass:"uiFont",isOpen:this.state.showUpdateAlert,backdropDismiss:!1,onDidPresent:function(t){var e,s,r,o;null===(e=n.registrationNew)||void 0===e||null===(s=e.installing)||void 0===s||s.postMessage({type:"SKIP_WAITING"}),null===(r=n.registrationNew)||void 0===r||null===(o=r.waiting)||void 0===o||o.postMessage({type:"SKIP_WAITING"})},header:"App \u5df2\u66f4\u65b0\uff0c\u8acb\u91cd\u555f!",buttons:[{text:"\u95dc\u9589",cssClass:"primary uiFont",handler:function(t){n.setState({showUpdateAlert:!1})}}]}),Object(I.jsx)(R,Object(d.a)({},Object(d.a)({text:null===(t=this.props.shareTextModal)||void 0===t?void 0:t.text,showModal:(null===(e=this.props.shareTextModal)||void 0===e?void 0:e.show)||!1,finish:function(){q.dispatch({type:"TMP_SET_KEY_VAL",key:"shareTextModal",val:{show:!1}})}},this.props))),Object(I.jsx)(z,Object(d.a)({},Object(d.a)({item:this.state.downloadModal.item,progress:this.state.downloadModal.progress,showModal:this.state.downloadModal.show},this.props))),Object(I.jsx)(m.a,{cssClass:"uiFont",isOpen:this.state.showDataDownloadEndAlert,backdropDismiss:!1,header:"\u85e5\u54c1\u8cc7\u6599\u4e0b\u8f09\u5b8c\u6210\uff01",buttons:[{text:"\u95dc\u9589",cssClass:"primary uiFont",handler:function(t){n.setState({showDataDownloadEndAlert:!1})}}]}),Object(I.jsx)(m.E,{cssClass:"uiFont",isOpen:this.state.showRestoreAppSettingsToast,onDidDismiss:function(){return n.setState({showRestoreAppSettingsToast:!1})},message:"\u5df2\u5957\u7528 app \u9023\u7d50\u4e2d\u7684\u8a2d\u5b9a\uff0c\u662f\u5426\u9084\u539f\u8a2d\u5b9a\uff1f",buttons:[{text:"\u53d6\u6d88",role:"cancel",handler:function(){return n.setState({showRestoreAppSettingsToast:!1})}},{text:"\u9084\u539f",handler:function(){return n.restoreAppSettings()}}]}),Object(I.jsx)(m.E,{cssClass:"uiFont",isOpen:this.state.showToast,onDidDismiss:function(){return n.setState({showToast:!1})},message:this.state.toastMessage,duration:2e3})]})}}]),n}(r.a.Component),$=Object(x.b)((function(t){return{shareTextModal:t.tmpSettings.shareTextModal,settings:t.settings}}))(Q),X=Object(f.f)(G),Z=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function tt(t,e){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){console.log("installingWorker stage changed: ".concat(n.state)),"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}})).catch((function(t){console.error("Error during service worker registration:",t)}))}k.a.enableAppLog(),a.a.render(Object(I.jsx)(i.a,{children:Object(I.jsx)(X,{})}),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("/twdi",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/twdi","/service-worker.js");Z?(!function(t,e){fetch(t,{headers:{"Service-Worker":"script"}}).then((function(n){var s=n.headers.get("content-type");404===n.status||null!=s&&-1===s.indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):tt(t,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):tt(e,t)}))}}({onSuccess:function(t){console.log("Precache app loaded!"),J.onSuccess(t)},onUpdate:function(t){console.log("Found app updated!"),J.onUpdate(t)}})},5:function(t,e,n){"use strict";var s=n(3),r=n.n(s),o=n(8),a=n(2),i=n(213),c=n.n(i),l=n(214),u=n(1),d="/twdi",p="twdiDb",h="";function j(){return(j=Object(o.a)(r.a.mark((function t(e,n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,s){var r,o=new l.DownloaderHelper(e,".",{});o.on("progress",(function(t){n(t.progress)})),o.on("end",(function(e){o.removeAllListeners();var n=new c.a(e.filePath).getEntries()[0];r=JSON.parse(n.getData().toString("utf8")),t(r)})),o.start()})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(){return(b=Object(o.a)(r.a.mark((function t(e){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=indexedDB.open(p),t.abrupt("return",new Promise((function(t,s){n.onsuccess=function(){var a=Object(o.a)(r.a.mark((function a(i){var c,l,u;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:c=n.result;try{l=c.transaction(["store"],"readwrite"),(u=l.objectStore("store").get(e)).onsuccess=function(){var n=Object(o.a)(r.a.mark((function n(o){var a;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=u.result){n.next=5;break}return console.error("".concat(e," loading failed!")),console.error((new Error).stack),n.abrupt("return",s());case 5:return n.abrupt("return",t(a));case 6:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()}catch(i){console.error(i)}case 2:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}()})));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function f(){return(f=Object(o.a)(r.a.mark((function t(e,n){var s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=indexedDB.open(p),t.abrupt("return",new Promise((function(t,a){s.onsuccess=function(){var i=Object(o.a)(r.a.mark((function o(i){var c,l,u;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:c=s.result,l=c.transaction(["store"],"readwrite"),(u=l.objectStore("store").put(n,e)).onsuccess=function(e){return t()},u.onerror=function(t){return a()};case 5:case"end":return r.stop()}}),o)})));return function(t){return i.apply(this,arguments)}}()})));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function m(){return(m=Object(o.a)(r.a.mark((function t(e){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=indexedDB.open(p),t.abrupt("return",new Promise((function(t,s){try{n.onsuccess=function(r){var o=n.result.transaction(["store"],"readwrite");try{var a=o.objectStore("store").delete(e);a.onsuccess=function(e){return t()},a.onerror=function(t){return s()}}catch(i){console.error(i)}}}catch(r){s(r)}})));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(){return x.apply(this,arguments)}function x(){return(x=Object(o.a)(r.a.mark((function t(){var e;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=indexedDB.open(p),t.abrupt("return",new Promise((function(t,n){e.onsuccess=function(){var s=Object(o.a)(r.a.mark((function s(o){var a,i,c;return r.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:a=e.result,i=a.transaction(["store"],"readwrite"),(c=i.objectStore("store").clear()).onsuccess=function(e){return t()},c.onerror=function(t){return n()};case 5:case"end":return s.stop()}}),s)})));return function(t){return s.apply(this,arguments)}}()})));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(){return(g=Object(o.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return localStorage.clear(),t.next=3,v();case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var w=console.log.bind(console),O=console.error.bind(console);window.webkit;function y(){return Object(a.P)("ios")&&"MacIntel"===navigator.platform}var k="Settings.json",S="twdiSettings.json",D=localStorage.getItem(k);null!=D&&(localStorage.setItem(S,D),localStorage.removeItem(k));var C={pwaUrl:d,bugReportApiUrl:"https://vh6ud1o56g.execute-api.ap-northeast-1.amazonaws.com/bugReportMailer",storeFile:S,downloadTwdData:function(t,e){return j.apply(this,arguments)},getLog:function(){return h},enableAppLog:function(){console.log=function(){h+="----- Info ----\n",h+=Array.from(arguments)+"\n",w.apply(console,arguments)},console.error=function(){h+="----- Error ----\n",h+=Array.from(arguments)+"\n",O.apply(console,arguments)}},disableAppLog:function(){h="",console.log=w,console.error=O},twdiDb:p,durgResources:[{item:"\u96e2\u7dda\u897f\u85e5\u8cc7\u6599",dataKey:"twdData",url:"https://d23fxcqevt3np7.cloudfront.net/\u5168\u90e8\u85e5\u54c1\u8a31\u53ef\u8b49\u8cc7\u6599\u96c6.zip"},{item:"\u96e2\u7dda\u4e2d\u85e5\u8cc7\u6599",dataKey:"twchData",url:"https://d23fxcqevt3np7.cloudfront.net/\u4e2d\u85e5\u85e5\u54c1\u8a31\u53ef\u8b49\u8cc7\u6599\u96c6.zip"}],appSettings:{theme:"\u4f48\u666f\u4e3b\u984c",uiFontSize:"UI \u5b57\u578b\u5927\u5c0f",fontSize:"\u5167\u5bb9\u5b57\u578b\u5927\u5c0f"},fetchErrorContent:Object(u.jsx)("div",{className:"contentCenter",children:Object(u.jsx)(a.m,{children:Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{children:"\u9023\u7dda\u5931\u6557!"}),Object(u.jsxs)("div",{style:{fontSize:"var(--ui-font-size)",paddingTop:24},children:["\u5982\u679c\u554f\u984c\u6301\u7e8c\u767c\u751f\uff0c\u8acb\u57f7\u884c",Object(u.jsx)("a",{href:"/".concat(d,"/settings"),target:"_self",children:"\u8a2d\u5b9a\u9801"}),"\u7684 app \u7570\u5e38\u56de\u5831\u529f\u80fd\u3002"]})]})})}),updateApp:function(){return new Promise(function(){var t=Object(o.a)(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:navigator.serviceWorker.getRegistrations().then(function(){var t=Object(o.a)(r.a.mark((function t(n){var s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(n.map((function(t){return t.update().then((function(t){return null!==t.installing||null!==t.waiting}))})));case 2:s=t.sent,e(s.reduce((function(t,e){return t||e}),!1));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},updateCssVars:function(t){document.documentElement.style.cssText="--ui-font-size: ".concat(t.uiFontSize,"px; --text-font-size: ").concat(t.fontSize,"px")},isMacCatalyst:y,isTouchDevice:function(){return Object(a.P)("ios")&&!y()||Object(a.P)("android")},isStoreApps:function(){return Object(a.P)("pwa")||Object(a.P)("electron")},dictItems:[],chineseHerbsItems:[],getFileFromIndexedDB:function(t){return b.apply(this,arguments)},saveFileToIndexedDB:function(t,e){return f.apply(this,arguments)},removeFileFromIndexedDB:function(t){return m.apply(this,arguments)},clearAppData:function(){return g.apply(this,arguments)},removeElementsByClassName:function(t,e){for(var n=t.getElementsByClassName(e);n.length>0;){var s;null===(s=n[0].parentNode)||void 0===s||s.removeChild(n[0])}},disableAndroidChromeCallout:function(t){return t.preventDefault(),t.stopPropagation(),!1},disableIosSafariCallout:function(t){var e=this.getSelection();if(((null===e||void 0===e?void 0:e.rangeCount)||0)>0){var n=null===e||void 0===e?void 0:e.getRangeAt(0);null===e||void 0===e||e.removeAllRanges(),setTimeout((function(){null===e||void 0===e||e.addRange(n)}),50)}},copyToClipboard:function(t){try{navigator.clipboard&&navigator.clipboard.writeText(t)}catch(e){console.error(e)}}};e.a=C}},[[431,3,4]]]);
//# sourceMappingURL=main.a6440f60.chunk.js.map